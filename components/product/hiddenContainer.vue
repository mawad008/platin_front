<template>
    <div>
        <div
          id="hiddenDiv"
          class="container product-card-scroll"
        >
          <div class="image-container">
            <div v-if="image" class="image">
              <img :src="image" alt="" />
            </div>
            <div class="d-flex flex-column gap-2">
              <h4>{{ mainProduct.name }}</h4>
              <span>{{ newPriceItem?.price }} {{ $t("curr") }}</span>
            </div>
          </div>

          <div class="actions">
            <input v-if="!newPriceItem?.stock == 0" type="number" min="1" name="" v-model="quantity" />
            <div  v-if="!newPriceItem?.stock == 0" class="input-number">
              <button @click="addNum()">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="13"
                  height="13"
                  viewBox="0 0 13 13"
                  fill="none"
                >
                  <path
                    d="M10.2915 5.95817H7.0415V2.70817C7.0415 2.56451 6.98444 2.42674 6.88285 2.32515C6.78127 2.22357 6.6435 2.1665 6.49984 2.1665C6.35618 2.1665 6.2184 2.22357 6.11682 2.32515C6.01524 2.42674 5.95817 2.56451 5.95817 2.70817V5.95817H2.70817C2.56451 5.95817 2.42674 6.01524 2.32515 6.11682C2.22357 6.2184 2.1665 6.35618 2.1665 6.49984C2.1665 6.6435 2.22357 6.78127 2.32515 6.88285C2.42674 6.98444 2.56451 7.0415 2.70817 7.0415H5.95817V10.2915C5.95817 10.4352 6.01524 10.5729 6.11682 10.6745C6.2184 10.7761 6.35618 10.8332 6.49984 10.8332C6.6435 10.8332 6.78127 10.7761 6.88285 10.6745C6.98444 10.5729 7.0415 10.4352 7.0415 10.2915V7.0415H10.2915C10.4352 7.0415 10.5729 6.98444 10.6745 6.88285C10.7761 6.78127 10.8332 6.6435 10.8332 6.49984C10.8332 6.35618 10.7761 6.2184 10.6745 6.11682C10.5729 6.01524 10.4352 5.95817 10.2915 5.95817Z"
                    fill="#DCBA95"
                  />
                </svg>
              </button>
              <span>{{ quantity }}</span>
              <button @click="minusNum()">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="13"
                  height="13"
                  viewBox="0 0 13 13"
                  fill="none"
                >
                  <path
                    d="M10.2915 5.9585H2.70817C2.56451 5.9585 2.42674 6.01556 2.32515 6.11715C2.22357 6.21873 2.1665 6.3565 2.1665 6.50016C2.1665 6.64382 2.22357 6.7816 2.32515 6.88318C2.42674 6.98476 2.56451 7.04183 2.70817 7.04183H10.2915C10.4352 7.04183 10.5729 6.98476 10.6745 6.88318C10.7761 6.7816 10.8332 6.64382 10.8332 6.50016C10.8332 6.3565 10.7761 6.21873 10.6745 6.11715C10.5729 6.01556 10.4352 5.9585 10.2915 5.9585Z"
                    fill="#919EAB"
                  />
                </svg>
              </button>
            </div>
            <button v-if="!newPriceItem?.stock == 0"  @click="addToBasket()" class="fill" type="">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M3.82541 6.0263L3.643 4.52963C3.5773 3.89515 3.0364 3.41266 2.39089 3.41266H1.71649C1.29919 3.41266 0.960937 3.07848 0.960938 2.66629C0.960938 2.2541 1.29919 1.91992 1.71649 1.91992H2.39089C3.81144 1.91992 5.00168 2.98164 5.14626 4.37771L5.28392 5.70695H20.6172C20.9342 5.70695 21.1724 5.99285 21.1114 6.30016L19.7718 13.049C19.4475 14.6828 17.998 15.8613 16.3128 15.8613H8.2843C8.51585 16.8706 9.42891 17.6023 10.494 17.6023H16.8175C16.8547 17.6023 16.8917 17.605 16.8731 17.6083C16.9285 17.6043 16.9842 17.6023 17.0401 17.6023C18.2917 17.6023 19.3063 18.6047 19.3063 19.8411C19.3063 21.0776 18.2917 22.0799 17.0401 22.0799C15.7885 22.0799 14.7739 21.0776 14.7739 19.8411C14.7739 19.5835 14.8181 19.3319 14.9028 19.095H12.1277C12.2124 19.3319 12.2566 19.5835 12.2566 19.8411C12.2566 21.0776 11.242 22.0799 9.99041 22.0799C8.73881 22.0799 7.72421 21.0776 7.72421 19.8411C7.72421 19.2958 7.92289 18.7819 8.27201 18.3814C7.41318 17.7635 6.84663 16.8104 6.73678 15.7467L6.72518 15.6344C5.49555 15.1719 4.58805 14.0477 4.46716 12.6823L4.16266 9.24294C4.15752 9.22166 4.15375 9.19981 4.15143 9.17746L3.82541 6.0263ZM9.99041 20.8361C10.5466 20.8361 10.9975 20.3906 10.9975 19.8411C10.9975 19.2916 10.5466 18.8462 9.99041 18.8462C9.43421 18.8462 8.98331 19.2916 8.98331 19.8411C8.98331 20.3906 9.43421 20.8361 9.99041 20.8361ZM17.0401 20.8361C17.5963 20.8361 18.0472 20.3906 18.0472 19.8411C18.0472 19.2916 17.5963 18.8462 17.0401 18.8462C16.4839 18.8462 16.033 19.2916 16.033 19.8411C16.033 20.3906 16.4839 20.8361 17.0401 20.8361Z"
                  fill="white"
                />
              </svg>
            </button>

            <!-- <button class="stroke" type="">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="19" viewBox="0 0 24 19" fill="none">
                <path
                  d="M12 7.125C9.7944 7.125 8 8.90071 8 11.0833C8 13.266 9.7944 15.0417 12 15.0417C14.2056 15.0417 16 13.266 16 11.0833C16 8.90071 14.2056 7.125 12 7.125ZM14.4 11.875C13.9576 11.875 13.6 11.5203 13.6 11.0833C13.6 10.2101 12.8824 9.5 12 9.5C11.5576 9.5 11.2 9.14533 11.2 8.70833C11.2 8.27133 11.5576 7.91667 12 7.91667C13.7648 7.91667 15.2 9.33692 15.2 11.0833C15.2 11.5203 14.8424 11.875 14.4 11.875Z"
                  fill="#2D3A4A" />
                <path
                  d="M16.4242 2.375L15.9762 0.599292C15.8866 0.247792 15.5674 0 15.2002 0H8.80017C8.43297 0 8.11377 0.247792 8.02417 0.599292L7.57617 2.375H16.4242Z"
                  fill="#2D3A4A" />
                <path
                  d="M21.6 3.16699H16.624H7.376H2.4C1.0768 3.16699 0 4.23258 0 5.54199V16.6253C0 17.9347 1.0768 19.0003 2.4 19.0003H21.6C22.9232 19.0003 24 17.9347 24 16.6253V5.54199C24 4.23258 22.9232 3.16699 21.6 3.16699ZM4 7.91699C3.5576 7.91699 3.2 7.56233 3.2 7.12533C3.2 6.68833 3.5576 6.33366 4 6.33366C4.4424 6.33366 4.8 6.68833 4.8 7.12533C4.8 7.56233 4.4424 7.91699 4 7.91699ZM12 16.6253C8.9128 16.6253 6.4 14.1395 6.4 11.0837C6.4 8.02783 8.9128 5.54199 12 5.54199C15.0872 5.54199 17.6 8.02783 17.6 11.0837C17.6 14.1395 15.0872 16.6253 12 16.6253Z"
                  fill="#2D3A4A" />
              </svg>
            </button> -->
          </div>
        </div>
    </div>
</template>
<script setup>
import { useStore } from "~/store";
const store = useStore;
const { locale } = useI18n();
  let props = defineProps(["mainProduct" , "newPriceItem" , "addToBasket"]);
  let quantity = computed(() => store.state.product.quantity);
  let image = ref()
const minusNum = () => {
  if (store.state.product.quantity > 1) {
    store.state.product.quantity--;
  }
};
const addNum = () => {
    store.state.product.quantity++;
};
 
watch(()=> props.mainProduct , (val)=>{
  if (val?.images){
    image.value = val?.images[0]?.full_image_path
  }
})

</script>
<style lang="">
    
</style>