<template>
  <div style=" margin-top: 80px">
    <div class="container cart-page">

      <div v-if="arrData.length >= 1">
        <div class="header">
          <v-breadcrumbs :items="items">
            <template v-slot:divider>
              <v-icon icon="mdi-chevron-left" class="arrow-icon"></v-icon>
            </template>
          </v-breadcrumbs>

          <button @click="deleteAll()" class="clear">
            <span>{{ $t("delete all") }}</span>
          </button>
        </div>
        <div class="main-cart">
          <div class="row">
            <div class="col-12 col-xl-7 col-lg-7">
              <div class="main">
                <div class="head">
                  <h5>{{ $t("cart1") }}<span> {{ `(${theNum})` }} </span></h5>

                  <div>
                    <svg xmlns="http://www.w3.org/2000/svg" height="20" fill="#919EAB" viewBox="0 0 512 512">
                      <path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24V264c0 13.3-10.7 24-24 
                 24s-24-10.7-24-24V152c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z" />
                    </svg>
                    <v-tooltip activator="parent" location="top">
                      <div class="w-100 h-100">
                        <span>{{ $t("update") }}</span>
                      </div>
                    </v-tooltip>
                  </div>
                </div>
                <div class="row">
                  <div class="col-12">
                    <div v-for="(item, index) in arrData" class="main-box">
                      <div class="head-icon mb-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="21" viewBox="0 0 20 21" fill="none">
                          <path
                            d="M10.0014 12C9.33853 12 8.70278 12.2634 8.23403 12.7322C7.76529 13.2011 7.50195 13.8369 7.50195 14.5V20.9999H12.5009V14.5C12.5009 13.8369 12.2376 13.2011 11.7688 12.7322C11.3001 12.2634 10.6643 12 10.0014 12Z"
                            fill="#919EAB" />
                          <path
                            d="M16.9093 9.99984H15.7196C14.7864 10.0045 13.881 9.68256 13.1601 9.08984C12.4321 9.67675 11.5257 9.99775 10.5907 9.99984H9.4109C8.47584 9.99775 7.56946 9.67675 6.84144 9.08984C6.12056 9.68256 5.21515 10.0045 4.28197 9.99984H3.09222C2.82366 9.999 2.5558 9.97221 2.29239 9.91984C2.02071 9.87573 1.75545 9.79848 1.50256 9.68984V17.9998C1.48651 18.3805 1.54615 18.7606 1.67804 19.1181C1.80993 19.4756 2.01144 19.8034 2.2709 20.0824C2.53035 20.3614 2.84259 20.5862 3.18951 20.7437C3.53644 20.9011 3.91117 20.9882 4.29197 20.9997H6.50151V14.4998C6.50151 13.5715 6.87018 12.6813 7.52642 12.0249C8.18266 11.3686 9.07271 10.9998 10.0008 10.9998C10.9288 10.9998 11.8189 11.3686 12.4751 12.0249C13.1314 12.6813 13.5 13.5715 13.5 14.4998V20.9997H15.7096C16.0904 20.9882 16.4651 20.9011 16.812 20.7437C17.159 20.5862 17.4712 20.3614 17.7307 20.0824C17.9901 19.8034 18.1916 19.4756 18.3235 19.1181C18.4554 18.7606 18.515 18.3805 18.499 17.9998V9.68984C17.9929 9.89068 17.4538 9.9958 16.9093 9.99984Z"
                            fill="#919EAB" />
                          <path
                            d="M19.4196 3.87015C19.2718 3.67883 19.0966 3.51036 18.8997 3.37015L18.3198 1.70017C18.1341 1.19646 17.7969 0.762632 17.3548 0.458246C16.9126 0.15386 16.3871 -0.00615234 15.8503 0.000181H4.15279C3.61606 -0.00615234 3.09052 0.15386 2.64836 0.458246C2.20619 0.762632 1.86908 1.19646 1.68331 1.70017L1.11343 3.33015C1.10875 3.34988 1.10875 3.37042 1.11343 3.39015C0.749472 3.65341 0.457233 4.00364 0.263381 4.40889C0.0695295 4.81414 -0.0197611 5.2615 0.00365903 5.71013C-0.00482211 6.27415 0.127961 6.83131 0.389905 7.33085C0.65185 7.8304 1.03463 8.25642 1.50335 8.57011C1.80823 8.75967 2.14832 8.88553 2.50314 8.9401C2.69709 8.98086 2.89482 9.00097 3.09301 9.0001H4.28276C4.79019 8.99961 5.28957 8.8733 5.73624 8.63247C6.1829 8.39165 6.5629 8.04382 6.84223 7.62011C7.12443 8.04335 7.50643 8.39062 7.95453 8.63128C8.40264 8.87195 8.90307 8.99861 9.41169 9.0001H10.5914C11.1001 8.99861 11.6005 8.87195 12.0486 8.63128C12.4967 8.39062 12.8787 8.04335 13.1609 7.62011C13.4402 8.04382 13.8202 8.39165 14.2669 8.63247C14.7136 8.8733 15.2129 8.99961 15.7204 9.0001H16.9101C17.1083 9.00097 17.306 8.98086 17.5 8.9401C17.8548 8.88553 18.1949 8.75967 18.4998 8.57011C18.968 8.25354 19.3502 7.82551 19.612 7.32454C19.8738 6.82356 20.0069 6.26535 19.9995 5.70013C20.0118 5.04308 19.8081 4.40015 19.4196 3.87015Z"
                            fill="#919EAB" />
                        </svg>
                        <div class="text">
                          <span class="by"> {{ $t("by") }} </span>
                          <span>{{ item.vendor_name }}</span>
                        </div>
                      </div>
                      <div class="boxes d-flex flex-column gap-4">
                        <div v-for="(theItem, vindex) in item.products"
                          class="box d-flex align-items-center flex-column flex-xl-row flex-lg-row justify-content-between">
                          <div class="image-box d-flex align-items-center gap-2">
                            <div class="image">
                              <!-- <img src="~/assets/images/product.png" alt="" /> -->
                              <img :src="theItem.images[0].full_image_path" alt="" />
                            </div>
                            <span @click="addItem(theItem.id)">{{
                              theItem.name
                            }}</span>
                          </div>
                          <input type="number" min="1" v-model="theItem.quantity" @input="addItem(theItem.id)" />

                          <span class="price">
                            {{ theItem.price * theItem.quantity }} {{ $t("curr") }}
                          </span>
                          <button @click="deleteItem(item.vendor_id, theItem.id, index)">
                            <img src="~/assets/images/trash.svg" alt="" />
                          </button>
                          <!-- <v-dialog
                          transition="dialog-bottom-transition"
                          width="auto"
                        >
                          <template v-slot:activator="{ props }">
                          </template>
                          <template v-slot:default="{ isActive }">
                            <v-card>
                              <v-toolbar
                                color="#DCBA95"
                                title="delete item"
                              ></v-toolbar>
                              <v-card-text>
                                <div class="text-h2 pa-12">are you sure to delete this item</div>
                              </v-card-text>
                              <v-card-actions class="justify-end">
                                <v-btn
                                  variant="text"
                                  @click="isActive.value = false ,"
                                  >delete</v-btn
                                >
                              </v-card-actions>
                            </v-card>
                          </template>
                        </v-dialog> -->

                        </div>
                        <v-divider :thickness="1"></v-divider>
                        <div class="shipping">
                          <img src="~/assets/images/package.svg" alt="" />
                          <div class="d-flex align-items-center gap-1">
                            <span> {{ $t("available") }} </span>
                            <span class="main">{{ $t("fast shipping") }} </span>
                            <span v-for="i in item.fast_shipping_cities"> {{ $t("in") }} {{ i.name }}</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-12 col-xl-5 col-lg-5">
              <div class="card-details">
                <div class="total-price">
                  <div class="total">
                    <span class="word all"> {{ $t("total") }}</span>
                    <span class="fw-bold price"> {{ total + (40 + 80) }} {{ $t("curr") }}</span>
                  </div>
                  <div class="total">
                    <span class="word"> {{ $t("price") }} </span>
                    <span class="price"> {{ total }} {{ $t("curr") }}</span>
                  </div>
                  <div class="total">
                    <span class="word"> {{ $t("discountss") }} </span>
                    <span class="price"> 0 {{ $t("curr") }} </span>
                  </div>
                  <div class="total">
                    <span class="word"> {{ $t("shipping") }}</span>
                    <span class="price"> 40 {{ $t("curr") }}</span>
                  </div>
                  <div class="total">
                    <span class="word"> {{ $t("bill") }}</span>
                    <span class="price"> 80 {{ $t("curr") }} </span>
                  </div>
                </div>

                <div class="input">
                  <input type="text" placeholder="كود الخصم" />
                  <button>{{ $t("act") }}</button>
                </div>

                <v-progress-linear color="#DCBA95" :model-value="progress" :height="6" reverse></v-progress-linear>
                <div class="mt-3 d-flex align-items-center gap-1 order-text">
                  <span> {{ $t("get offer") }}</span>
                  <span class="gold">600 {{ $t("curr") }}</span>
                </div>
                <h6>{{ $t("follow1") }}</h6>

                <button v-if="auth"  class="pay">
                 <nuxt-link class="w-100" :to="localePath('/checkout')">{{ $t("start") }}</nuxt-link>
                </button>
                <button v-else @click="dialog = true" class="pay">{{ $t("start") }}</button>
                <v-dialog v-model="dialog">

                  <div class="card-popup-container">
                    <div class="main">
                      <svg xmlns="http://www.w3.org/2000/svg" width="104" height="104" viewBox="0 0 104 104" fill="none">
                        <path d="M99.125 78H50.375L55.25 35.75H94.25L99.125 78Z" fill="#AFABF9" />
                        <path
                          d="M84.5 42.25C84.069 42.25 83.6557 42.0788 83.351 41.774C83.0462 41.4693 82.875 41.056 82.875 40.625V30.875C82.875 29.1511 82.1902 27.4978 80.9712 26.2788C79.7522 25.0598 78.0989 24.375 76.375 24.375C74.6511 24.375 72.9978 25.0598 71.7788 26.2788C70.5598 27.4978 69.875 29.1511 69.875 30.875V40.625C69.875 41.056 69.7038 41.4693 69.399 41.774C69.0943 42.0788 68.681 42.25 68.25 42.25C67.819 42.25 67.4057 42.0788 67.101 41.774C66.7962 41.4693 66.625 41.056 66.625 40.625V30.875C66.625 28.2891 67.6522 25.8092 69.4807 23.9807C71.3092 22.1522 73.7891 21.125 76.375 21.125C78.9609 21.125 81.4408 22.1522 83.2693 23.9807C85.0978 25.8092 86.125 28.2891 86.125 30.875V40.625C86.125 41.056 85.9538 41.4693 85.649 41.774C85.3443 42.0788 84.931 42.25 84.5 42.25Z"
                          fill="#766FF8" />
                        <path d="M53.625 78H4.875L9.75 35.75H48.75L53.625 78Z" fill="#7ED5DC" />
                        <path
                          d="M35.75 42.25C35.319 42.25 34.9057 42.0788 34.601 41.774C34.2962 41.4693 34.125 41.056 34.125 40.625V30.875C34.125 29.1511 33.4402 27.4978 32.2212 26.2788C31.0022 25.0598 29.3489 24.375 27.625 24.375C25.9011 24.375 24.2478 25.0598 23.0288 26.2788C21.8098 27.4978 21.125 29.1511 21.125 30.875V40.625C21.125 41.056 20.9538 41.4693 20.649 41.774C20.3443 42.0788 19.931 42.25 19.5 42.25C19.069 42.25 18.6557 42.0788 18.351 41.774C18.0462 41.4693 17.875 41.056 17.875 40.625V30.875C17.875 28.2891 18.9022 25.8092 20.7307 23.9807C22.5592 22.1522 25.0391 21.125 27.625 21.125C30.2109 21.125 32.6908 22.1522 34.5193 23.9807C36.3478 25.8092 37.375 28.2891 37.375 30.875V40.625C37.375 41.056 37.2038 41.4693 36.899 41.774C36.5943 42.0788 36.181 42.25 35.75 42.25Z"
                          fill="#38C6D2" />
                        <path d="M78 87.75H25.7969L30.875 32.5H73.125L78 87.75Z" fill="#FBCE44" />
                        <path
                          d="M61.75 42.25C61.319 42.25 60.9057 42.0788 60.601 41.774C60.2962 41.4693 60.125 41.056 60.125 40.625V26C60.125 23.8451 59.269 21.7785 57.7452 20.2548C56.2215 18.731 54.1549 17.875 52 17.875C49.8451 17.875 47.7785 18.731 46.2548 20.2548C44.731 21.7785 43.875 23.8451 43.875 26V40.625C43.875 41.056 43.7038 41.4693 43.399 41.774C43.0943 42.0788 42.681 42.25 42.25 42.25C41.819 42.25 41.4057 42.0788 41.101 41.774C40.7962 41.4693 40.625 41.056 40.625 40.625V26C40.625 22.9832 41.8234 20.0899 43.9567 17.9567C46.0899 15.8234 48.9832 14.625 52 14.625C55.0168 14.625 57.9101 15.8234 60.0433 17.9567C62.1766 20.0899 63.375 22.9832 63.375 26V40.625C63.375 41.056 63.2038 41.4693 62.899 41.774C62.5943 42.0788 62.181 42.25 61.75 42.25Z"
                          fill="#EDB60B" />
                        <path
                          d="M42.25 48.75C43.1475 48.75 43.875 48.0225 43.875 47.125C43.875 46.2275 43.1475 45.5 42.25 45.5C41.3525 45.5 40.625 46.2275 40.625 47.125C40.625 48.0225 41.3525 48.75 42.25 48.75Z"
                          fill="#EDB60B" />
                        <path
                          d="M19.5 48.75C20.3975 48.75 21.125 48.0225 21.125 47.125C21.125 46.2275 20.3975 45.5 19.5 45.5C18.6025 45.5 17.875 46.2275 17.875 47.125C17.875 48.0225 18.6025 48.75 19.5 48.75Z"
                          fill="#38C6D2" />
                        <path
                          d="M61.75 48.75C62.6475 48.75 63.375 48.0225 63.375 47.125C63.375 46.2275 62.6475 45.5 61.75 45.5C60.8525 45.5 60.125 46.2275 60.125 47.125C60.125 48.0225 60.8525 48.75 61.75 48.75Z"
                          fill="#EDB60B" />
                        <path
                          d="M84.5 48.75C85.3975 48.75 86.125 48.0225 86.125 47.125C86.125 46.2275 85.3975 45.5 84.5 45.5C83.6025 45.5 82.875 46.2275 82.875 47.125C82.875 48.0225 83.6025 48.75 84.5 48.75Z"
                          fill="#766FF8" />
                      </svg>
                      <div>
                        <h3>{{ $t("shop") }}</h3>
                        <p>{{ $t("shop2") }}</p>
                      </div>

                      <div class="btns">
                        <nuxt-link :to="localePath('/checkout')">
                          <button class="fill">{{ $t("buy") }}</button>
                        </nuxt-link>
                        <nuxt-link :to="localePath('/auth')">
                          <button class="stroke">{{ $t("login") }}</button>
                        </nuxt-link>
                      </div>

                      <div @click="dialog = false" class="close">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                          <path
                            d="M18.3007 5.70971C18.1139 5.52246 17.8602 5.41723 17.5957 5.41723C17.3312 5.41723 17.0775 5.52246 16.8907 5.70971L12.0007 10.5897L7.1107 5.69971C6.92387 5.51246 6.67022 5.40723 6.4057 5.40723C6.14119 5.40723 5.88753 5.51246 5.7007 5.69971C5.3107 6.08971 5.3107 6.71971 5.7007 7.10971L10.5907 11.9997L5.7007 16.8897C5.3107 17.2797 5.3107 17.9097 5.7007 18.2997C6.0907 18.6897 6.7207 18.6897 7.1107 18.2997L12.0007 13.4097L16.8907 18.2997C17.2807 18.6897 17.9107 18.6897 18.3007 18.2997C18.6907 17.9097 18.6907 17.2797 18.3007 16.8897L13.4107 11.9997L18.3007 7.10971C18.6807 6.72971 18.6807 6.08971 18.3007 5.70971Z"
                            fill="#2D3A4A" />
                        </svg>
                      </div>

                    </div>
                  </div>

                </v-dialog>

                <div class="pay-methods mt-4">
                  <span class=""> {{ $t("payment") }}</span>
                  <div class="inputs my-3 d-flex align-items-center gap-3">
                    <label>
                      <input type="radio" name="card_id" value="1" />
                      <div class="main">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                          <mask id="mask0_505_9493" style="mask-type: luminance" maskUnits="userSpaceOnUse" x="0" y="0"
                            width="20" height="20">
                            <path d="M0 0H19.9997V20H0V0Z" fill="white" />
                          </mask>
                          <g mask="url(#mask0_505_9493)">
                            <path
                              d="M1.94972 0.34082H18.0482C18.2596 0.340805 18.469 0.382434 18.6643 0.46333C18.8596 0.544226 19.0371 0.662804 19.1866 0.812295C19.3361 0.961786 19.4548 1.13926 19.5357 1.33459C19.6166 1.52992 19.6583 1.73927 19.6583 1.9507V18.0495C19.6583 18.2609 19.6166 18.4702 19.5357 18.6656C19.4548 18.8609 19.3362 19.0383 19.1867 19.1878C19.0372 19.3373 18.8597 19.4559 18.6644 19.5367C18.469 19.6176 18.2597 19.6593 18.0483 19.6592H1.94949C1.52261 19.6592 1.1132 19.4897 0.81134 19.1878C0.509475 18.886 0.339874 18.4766 0.339844 18.0497V1.95058C0.339874 1.52364 0.509499 1.11419 0.811407 0.812302C1.11331 0.510416 1.52278 0.34082 1.94972 0.34082Z"
                              fill="#FDB913" />
                            <path
                              d="M18.0493 0.340728C18.4762 0.34085 18.8856 0.510523 19.1875 0.812439C19.4893 1.11436 19.6589 1.52379 19.6589 1.95072V18.0494C19.6589 18.4763 19.4893 18.8857 19.1875 19.1876C18.8856 19.4895 18.4762 19.6592 18.0493 19.6593H1.95061C1.73918 19.6593 1.52982 19.6177 1.33448 19.5368C1.13914 19.4559 0.96165 19.3373 0.812149 19.1878C0.662649 19.0383 0.544068 18.8609 0.46318 18.6655C0.382292 18.4702 0.340683 18.2608 0.340728 18.0494V1.95072C0.340683 1.73929 0.382292 1.52992 0.463178 1.33458C0.544065 1.13923 0.662644 0.961733 0.812142 0.812224C0.961641 0.662714 1.13913 0.544123 1.33447 0.463222C1.52981 0.382322 1.73918 0.340698 1.95061 0.340728H18.0493ZM18.0493 0H1.95061C1.43342 0.000546867 0.937577 0.206248 0.571883 0.571964C0.206188 0.93768 0.00051644 1.43354 0 1.95072L0 18.0494C0.000577133 18.5665 0.206272 19.0624 0.571957 19.428C0.937641 19.7937 1.43345 19.9994 1.95061 20H18.0493C18.5664 19.9994 19.0622 19.7937 19.4278 19.428C19.7935 19.0623 19.9991 18.5665 19.9997 18.0494V1.95072C19.9992 1.43357 19.7935 0.937727 19.4279 0.572011C19.0622 0.206295 18.5664 0.000577293 18.0493 0Z"
                              fill="white" />
                            <path
                              d="M11.1261 10.2084L11.1245 6.74961L12.0274 6.53535V6.98889C12.0274 6.98889 12.2612 6.39259 12.804 6.25419C12.885 6.22807 12.9712 6.22228 13.0551 6.23732V7.11983C12.8925 7.12196 12.7319 7.15539 12.582 7.2183C12.2484 7.35005 12.0805 7.63753 12.0805 8.07637L12.0811 9.98624L11.1261 10.2084ZM6.36685 11.3332C6.36685 11.3332 6.21996 11.1131 6.21996 10.3348V8.61277L5.75551 8.72329V8.01371L6.2211 7.90377V7.13028L7.18109 6.90362V7.677L7.85933 7.51588V8.22453L7.18109 8.38554C7.18109 8.38554 7.17994 9.79654 7.18109 10.1391C7.18109 10.9366 7.39271 11.0897 7.39271 11.0897L6.36685 11.3332ZM7.95974 9.27552C7.95974 8.66063 8.04731 8.21202 8.23529 7.86774C8.45907 7.45919 8.82574 7.19294 9.36007 7.07129C10.4132 6.83178 10.7934 7.45517 10.7786 8.29109C10.773 8.59005 10.7744 8.73568 10.7744 8.73568L8.91892 9.17178V9.20161C8.91892 9.78575 9.04137 10.0629 9.41148 9.98429C9.73121 9.91692 9.82015 9.71667 9.8454 9.46901C9.84953 9.42907 9.85148 9.32751 9.85148 9.32751L10.7207 9.11921C10.7207 9.11921 10.7227 9.19037 10.7215 9.27024C10.7139 9.60213 10.6174 10.4254 9.4093 10.7111C8.2649 10.9827 7.95986 10.2838 7.95986 9.27541M9.39863 7.71556C9.09118 7.78534 8.92994 8.08693 8.92294 8.58661L9.8563 8.36431C9.8579 8.3417 9.85813 8.2919 9.8579 8.21386C9.8563 7.83664 9.7397 7.63753 9.39863 7.71556ZM16.3044 7.25284C16.2684 6.19944 16.5416 5.3634 17.7169 5.09716C18.466 4.92697 18.7505 5.12183 18.8945 5.31016C19.033 5.48987 19.0865 5.73225 19.0865 6.07171L19.0873 6.13403L18.1678 6.35254L18.1671 6.22458C18.1678 5.82199 18.0559 5.6689 17.7635 5.74212C17.4158 5.82945 17.2753 6.15951 17.2753 6.81572C17.2753 7.04868 17.2765 7.09046 17.2765 7.1219C17.2765 7.78878 17.3675 8.09405 17.7682 8.01016C18.1159 7.93832 18.1634 7.63305 18.1691 7.36542C18.1698 7.32342 18.1715 7.18892 18.1715 7.18892L19.0896 6.97202C19.0896 6.97202 19.0905 7.03985 19.0905 7.11524C19.0882 7.98973 18.6273 8.54082 17.7638 8.74176C16.5742 9.02063 16.3413 8.33321 16.3043 7.25284M13.1259 8.72765C13.1259 7.92638 13.5952 7.67299 14.3017 7.38069C14.937 7.11788 14.9508 6.9874 14.9534 6.75902C14.9569 6.5668 14.8678 6.40234 14.5515 6.48302C14.4461 6.50427 14.3509 6.56053 14.2814 6.64266C14.2119 6.7248 14.1722 6.828 14.1687 6.93553C14.1635 6.99456 14.1615 7.05382 14.1627 7.11306L13.272 7.32342C13.266 7.1459 13.2867 6.96848 13.3335 6.79712C13.4758 6.31799 13.8984 5.99563 14.6279 5.82681C15.5756 5.60842 15.8914 6.02432 15.8925 6.67123V8.20319C15.8925 8.94409 16.0301 9.05265 16.0301 9.05265L15.1557 9.25957C15.1074 9.15852 15.0682 9.05341 15.0385 8.94547C15.0385 8.94547 14.8468 9.42792 14.1866 9.58308C13.4931 9.74662 13.1259 9.31683 13.1259 8.72765ZM14.9474 7.63351C14.8 7.73685 14.6444 7.82797 14.4821 7.90595C14.1906 8.04837 14.0589 8.22407 14.0589 8.49468C14.0589 8.72902 14.2041 8.88292 14.4679 8.81774C14.7509 8.74635 14.9474 8.48229 14.9474 8.11539V7.63351ZM1.3474 13.7578C1.24759 13.7577 1.14966 13.7306 1.06392 13.6795C0.978177 13.6284 0.907797 13.5552 0.860189 13.4675C0.81258 13.3797 0.789504 13.2808 0.79339 13.1811C0.797275 13.0813 0.827979 12.9845 0.882269 12.9007L0.888466 12.8927L0.898795 12.8899L2.20467 12.5817V13.5734L2.18436 13.5781C1.94378 13.636 1.70273 13.692 1.46124 13.746C1.42381 13.7539 1.38566 13.7578 1.3474 13.7578ZM1.3474 15.0264C1.20047 15.0264 1.05954 14.9681 0.955578 14.8642C0.851618 14.7604 0.793136 14.6196 0.792984 14.4726C0.792684 14.3656 0.823722 14.2608 0.882269 14.1711L0.888466 14.162L0.898795 14.1592L2.20467 13.8511V14.8427L2.18436 14.848C1.88816 14.9192 1.53412 15.0011 1.46124 15.0157C1.42373 15.0229 1.3856 15.0265 1.3474 15.0264ZM1.3474 16.2975C1.20041 16.2974 1.05946 16.2389 0.95551 16.135C0.85156 16.0311 0.793106 15.8901 0.792984 15.7432C0.792593 15.6361 0.823638 15.5313 0.882269 15.4418L0.888466 15.4318L2.20467 15.1216V16.1131L2.18436 16.1185C1.87152 16.1938 1.52413 16.2723 1.46124 16.2861C1.42376 16.2936 1.38563 16.2974 1.3474 16.2975ZM2.20455 6.75501V12.3035L1.19327 12.5427L1.19293 6.99406L2.20455 6.75501ZM3.71298 12.0705C3.7141 11.9879 3.69879 11.9058 3.66793 11.8291C3.63706 11.7524 3.59127 11.6826 3.5332 11.6237C3.47514 11.5649 3.40595 11.5181 3.32967 11.4862C3.25339 11.4543 3.17153 11.4379 3.08885 11.4379C3.00617 11.4379 2.92431 11.4543 2.84803 11.4862C2.77175 11.5181 2.70257 11.5649 2.6445 11.6237C2.58643 11.6826 2.54064 11.7524 2.50978 11.8291C2.47891 11.9058 2.4636 11.9879 2.46472 12.0705L2.46587 17.2566C2.46641 17.7045 2.64447 18.1338 2.96101 18.4506C3.27755 18.7674 3.70676 18.9457 4.15459 18.9466C4.62706 18.9466 5.92134 18.9443 5.92134 18.9443L5.92192 16.7808L5.92249 14.3682C5.92264 14.2337 5.88959 14.1012 5.82627 13.9826C5.76294 13.8639 5.67131 13.7627 5.5595 13.688L3.98497 12.6184L3.98451 15.0471C3.98451 15.0648 3.98104 15.0822 3.97429 15.0985C3.96754 15.1148 3.95765 15.1296 3.94518 15.1421C3.93271 15.1545 3.91791 15.1644 3.90162 15.1712C3.88533 15.1779 3.86787 15.1814 3.85024 15.1814C3.83261 15.1814 3.81515 15.1779 3.79886 15.1712C3.78256 15.1644 3.76776 15.1545 3.75529 15.1421C3.74283 15.1296 3.73294 15.1148 3.72619 15.0985C3.71944 15.0822 3.71597 15.0648 3.71597 15.0471C3.71597 15.0211 3.71298 12.3913 3.71298 12.0705ZM4.55591 8.20135C4.36457 8.24575 4.18506 8.33094 4.02967 8.45108C3.87427 8.57122 3.74663 8.7235 3.65549 8.89749V8.50753L2.74462 8.72306L2.74577 11.2134C2.90554 11.1502 3.07965 11.1325 3.24888 11.162C3.41811 11.1916 3.57587 11.2674 3.70472 11.3811V9.77324C3.70472 9.38799 3.89637 9.08031 4.17019 9.01995C4.37619 8.97473 4.54822 9.04841 4.54822 9.4153L4.54891 11.7613L5.50832 11.5363V9.0546C5.50832 8.45291 5.27661 8.03231 4.55591 8.20135ZM18.4956 4.65005C18.3782 4.65016 18.2635 4.61546 18.1659 4.55034C18.0682 4.48522 17.9921 4.3926 17.9472 4.28421C17.9022 4.17582 17.8904 4.05653 17.9133 3.94143C17.9361 3.82634 17.9926 3.7206 18.0756 3.63762C18.1585 3.55464 18.2643 3.49813 18.3794 3.47525C18.4945 3.45237 18.6137 3.46415 18.7221 3.50909C18.8305 3.55403 18.9232 3.63012 18.9883 3.72773C19.0535 3.82533 19.0882 3.94007 19.0881 4.05742C19.0879 4.21453 19.0255 4.36518 18.9144 4.4763C18.8033 4.58742 18.6527 4.64983 18.4956 4.65005ZM18.4956 3.53869C18.393 3.53867 18.2927 3.56906 18.2074 3.62603C18.1221 3.683 18.0556 3.76398 18.0164 3.85873C17.9771 3.95349 17.9668 4.05776 17.9868 4.15836C18.0068 4.25897 18.0561 4.35139 18.1287 4.42393C18.2012 4.49648 18.2936 4.54589 18.3942 4.56592C18.4948 4.58595 18.599 4.57571 18.6938 4.53648C18.7886 4.49725 18.8696 4.43079 18.9266 4.34552C18.9836 4.26025 19.014 4.15999 19.0141 4.05742C19.0139 3.91992 18.9593 3.78808 18.8621 3.69084C18.7649 3.59359 18.6331 3.53887 18.4956 3.53869Z"
                              fill="#231F20" />
                            <path
                              d="M18.2812 3.70408H18.5368C18.5618 3.7014 18.5871 3.70439 18.6107 3.71282C18.6344 3.72124 18.6558 3.7349 18.6735 3.75276C18.6911 3.77063 18.7045 3.79224 18.7127 3.816C18.7208 3.83976 18.7235 3.86505 18.7206 3.88999C18.7206 3.98398 18.6789 4.05617 18.6001 4.06845V4.06982C18.6718 4.07717 18.7095 4.11676 18.7132 4.21855C18.7146 4.26446 18.7153 4.32138 18.7175 4.36568C18.7175 4.37815 18.7207 4.39041 18.7267 4.40134C18.7327 4.41226 18.7414 4.42151 18.7519 4.42822H18.6212C18.6087 4.40908 18.6019 4.3868 18.6017 4.36396C18.5976 4.32069 18.5987 4.27984 18.5967 4.22728C18.5948 4.14832 18.5706 4.11366 18.4913 4.11366H18.3967V4.42811H18.2812V3.70408ZM18.4892 4.02656C18.5049 4.02799 18.5207 4.02592 18.5355 4.0205C18.5503 4.01508 18.5637 4.00644 18.5748 3.99521C18.5858 3.98398 18.5942 3.97043 18.5994 3.95555C18.6046 3.94067 18.6064 3.92483 18.6048 3.90916C18.6048 3.83192 18.5715 3.7913 18.4953 3.7913H18.3967V4.02656H18.4892Z"
                              fill="#231F20" />
                          </g>
                        </svg>
                      </div>
                    </label>
                    <label>
                      <input type="radio" name="card_id" value="1" />
                      <div class="main">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                          <path
                            d="M19.7009 12.4183C18.3647 17.7783 12.9343 21.0365 7.5819 19.7004C2.22174 18.3643 -1.03655 12.934 0.299583 7.58173C1.63572 2.22169 7.05839 -1.03653 12.4186 0.299576C17.7709 1.62787 21.037 7.05823 19.7009 12.4183Z"
                            fill="url(#paint0_linear_505_9489)" />
                          <path
                            d="M14.7617 8.75391C14.957 7.42578 13.9492 6.70703 12.5586 6.23047L13.0117 4.42578L11.918 4.15234L11.4805 5.91016C11.1914 5.83984 10.8945 5.76953 10.5977 5.70703L11.0352 3.94141L9.94141 3.66797L9.49609 5.46484C9.25391 5.41016 9.01953 5.35547 8.79297 5.30078V5.29297L7.27734 4.91797L6.98828 6.08984C6.98828 6.08984 7.80078 6.27734 7.78516 6.28516C8.23047 6.39453 8.30859 6.69141 8.29297 6.92578L7.77734 8.98047C7.80859 8.98828 7.84766 8.99609 7.89453 9.01953C7.85547 9.01172 7.81641 9.00391 7.77734 8.98828L7.05859 11.8633C7.00391 11.9961 6.86328 12.1992 6.55859 12.1211C6.56641 12.1367 5.76172 11.9258 5.76172 11.9258L5.21484 13.1836L6.64453 13.543C6.91016 13.6133 7.16797 13.6758 7.42578 13.7461L6.97266 15.5664L8.06641 15.8398L8.51953 14.0352C8.81641 14.1133 9.11328 14.1914 9.39453 14.2617L8.94922 16.0586L10.043 16.332L10.4961 14.5117C12.3711 14.8633 13.7773 14.7227 14.3633 13.0273C14.8398 11.668 14.3398 10.8789 13.3555 10.3633C14.082 10.1992 14.6211 9.72266 14.7617 8.75391ZM12.2539 12.2695C11.918 13.6289 9.62109 12.8945 8.87891 12.707L9.48047 10.293C10.2227 10.4805 12.6133 10.8477 12.2539 12.2695ZM12.5977 8.73047C12.2852 9.97266 10.3789 9.33984 9.76172 9.18359L10.3086 6.99609C10.9258 7.15234 12.918 7.44141 12.5977 8.73047Z"
                            fill="white" />
                          <defs>
                            <linearGradient id="paint0_linear_505_9489" x1="9.99466" y1="-0.0047105" x2="9.99466"
                              y2="19.998" gradientUnits="userSpaceOnUse">
                              <stop stop-color="#F9AA4B" />
                              <stop offset="1" stop-color="#F7931A" />
                            </linearGradient>
                          </defs>
                        </svg>
                      </div>
                    </label>
                    <label>
                      <input type="radio" name="card_id" value="1" />
                      <div class="main">
                        <svg xmlns="http://www.w3.org/2000/svg" width="38" height="14" viewBox="0 0 38 14" fill="none">
                          <path
                            d="M19.6045 5.06359C19.5845 6.55925 21.0136 7.39394 22.0902 7.89017C23.1964 8.39937 23.5679 8.72586 23.5637 9.18115C23.5552 9.87806 22.6813 10.1856 21.8633 10.1976C20.4363 10.2185 19.6066 9.83313 18.947 9.54158L18.4329 11.817C19.0947 12.1056 20.3201 12.3572 21.591 12.3682C24.5738 12.3682 26.5254 10.9753 26.5359 8.81572C26.5476 6.07501 22.5282 5.92324 22.5557 4.69816C22.5652 4.32674 22.9399 3.93036 23.7611 3.82952C24.1674 3.7786 25.2894 3.73966 26.5613 4.29379L27.0605 2.09223C26.3766 1.8566 25.4973 1.63096 24.4028 1.63096C21.5952 1.63096 19.6204 3.04275 19.6045 5.06359ZM31.8577 1.82066C31.3131 1.82066 30.854 2.12119 30.6492 2.58247L26.3882 12.2064H29.3689L29.9621 10.6558H33.6046L33.9487 12.2064H36.5758L34.2833 1.82066H31.8577ZM32.2747 4.62627L33.1349 8.52617H30.779L32.2747 4.62627ZM15.9905 1.82066L13.641 12.2064H16.4813L18.8298 1.82066H15.9905ZM11.7886 1.82066L8.83217 8.8896L7.6363 2.879C7.49592 2.20805 6.94178 1.82066 6.32643 1.82066H1.49333L1.42578 2.12219C2.41794 2.32587 3.54521 2.65436 4.22811 3.00581C4.64609 3.22047 4.76536 3.40818 4.90257 3.91838L7.16766 12.2064H10.1695L14.7714 1.82066H11.7886Z"
                            fill="url(#paint0_linear_505_9487)" />
                          <defs>
                            <linearGradient id="paint0_linear_505_9487" x1="17.5857" y1="12.5836" x2="17.8797"
                              y2="1.55537" gradientUnits="userSpaceOnUse">
                              <stop stop-color="#222357" />
                              <stop offset="1" stop-color="#254AA5" />
                            </linearGradient>
                          </defs>
                        </svg>
                      </div>
                    </label>
                    <label>
                      <input type="radio" name="card_id" value="1" />
                      <div class="main">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="18" viewBox="0 0 30 18" fill="none">
                          <circle cx="9" cy="9" r="9" fill="#E80B26" />
                          <circle cx="21" cy="9" r="9" fill="#F59D31" />
                          <path
                            d="M15 15.7085C16.8413 14.0605 18 11.6658 18 9.00024C18 6.33472 16.8413 3.93994 15 2.29199C13.1587 3.93994 12 6.33472 12 9.00024C12 11.6658 13.1587 14.0605 15 15.7085Z"
                            fill="#FC6020" />
                        </svg>
                      </div>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
      <div v-if="arrData.length < 1" class="empty-container">
        <div class="empty">
        <client-only>
            <Vue3Lottie :animation-data="cart" :height="200" :width="200" />
        </client-only>
          <h4> {{ $t("empty cart") }} </h4>
          <p>
           {{ $t("empty cart1") }}
            </p>

          <nuxt-link :to="localePath('/')">
            <button>{{ $t("shopNow") }}</button>

          </nuxt-link>

        </div>
      </div>
    </div>

  </div>
</template>

<script setup>
import { useStore } from "~/store";
import { Vue3Lottie } from "vue3-lottie";

import cart from "~/assets/animations/empty-cart.json";
const { locale } = useI18n();
    const localePath = useLocalePath();
    const store = useStore;
    let auth = ref(store.state.authenticated);
    let count = ref(1);
    let dialog = ref(false);
    let progressv = ref(0);
    let items = ref([
      {
        title: locale.value == "ar" ? "الرئيسية" : "home",
        disabled: true,
        href: "/",
      },
      {
        title: locale.value == "ar" ? "السلة" : "cart",
        disabled: false,
        href: "cart",
      },
    ]);

//     let aarr = [
//       {
//         vendor_id:1,
//         quantity:2,
//         price:100,
//         name:'asas',
//         id:1,
//        images:["https://images.unsplash.com/photo-1683009427037-c5afc2b8134d?q=80&w=1740&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"]
//       },
//       {
//         vendor_id:1,
//         quantity:2,
//         price:100,
//         name:'asas',
//         id:2,
//        images:["https://images.unsplash.com/photo-1683009427037-c5afc2b8134d?q=80&w=1740&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"]
//       },
//       {
//         vendor_id:1,
//         quantity:2,
//         price:100,
//         name:'asas',
//         id:3,
//        images:["https://images.unsplash.com/photo-1683009427037-c5afc2b8134d?q=80&w=1740&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"]
//       },
//       {
//         vendor_id:3,
//         quantity:2,
//         price:100,
//         name:'asas',
//         id:4,
//        images:["https://images.unsplash.com/photo-1683009427037-c5afc2b8134d?q=80&w=1740&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"]
//       },
//     ]

//     let newArr = aarr.map(item => ({
//   vendor_id: item.vendor_id,
//   quantity: item.quantity,
//   price: item.price,
//   id: item.id
// }));


    //     let newArray = aarr.flatMap(vendor => {
    //   let vendorId = vendor.vendorId;
    //   return vendor.products.map(product => ({
    //     ...product,
    //     vendorId: vendorId
    //   }));
    // });


    let arrData = ref(store.state.basket);
    const deleteItem = (vendor_id, itemid, index) => {
      store.commit("deleteItem", { vendor_id: vendor_id, itemid: itemid, indexx: index });
    };

    const addItem = (id) => {
      store.commit("addItem", { id: id });
    };

    let theNum = computed(() => {
      return store.state.basketNum;
    });

    // let getTotal = computed(() => {
    //   let totall = 0;
    //   arrData.value.forEach((ele) => {
    //     ele.products.forEach((e) => {
    //       totall += e.price;
    //     });
    //   });

    //   return totall
    // });
    let total = computed(() => {
      return store.state.totalNum;
    });

    let progress = computed(() => {
      if (total.value <= 300) {
        return 50;
      } else if (total.value <= 450) {
        return 70;
      } else if (total.value >= 600) {
        return 100;
      } else {
        return 10;
      }
    });


    const deleteAll = () => {
      store.commit('deleteAll');
      console.log('delete');
      arrData.value = [];
    }

    onMounted(() => {
      // getTotal();
      //getAllItems();
      //totalFunc();
      // console.log(getTotal.value);
      console.log(store.state.basket);

    });

</script>

<style lang="scss" scoped></style>
